(this.webpackJsonptwitchhighlights=this.webpackJsonptwitchhighlights||[]).push([[0],{405:function(e,t,n){"use strict";n.r(t);var a=n(32),r=n.n(a),c=n(64),i=n(440),o=n(445),s=n(17),l=n(1),u=n.n(l),d=n(439),b=n(21),j=n(128),h=n.n(j),m=n(67),p=n(465),f=n(463),v=n(3),x=function(e){var t=function(){e.setOpen(!1)};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(p.a,Object(m.a)(Object(m.a)({open:e.open,autoHideDuration:5e3,onClose:t},e.snackbarProps),{},{children:Object(v.jsx)(f.a,Object(m.a)(Object(m.a)({elevation:6,variant:"filled",severity:"error"},e.alertProps),{},{onClose:t,children:e.message}))}))})},O=Object(i.a)((function(e){return{root:{border:"1px solid #696969",borderRadius:25,display:"flex",width:"100%",maxWidth:800,background:e.palette.background.paper},button:{marginLeft:"auto",marginTop:e.spacing(2),marginBottom:e.spacing(2)},input:{border:0,flex:1,marginLeft:20,outlineStyle:"none",boxShadow:"none",borderColor:"transparent","input::-ms-clear":{display:"none"},fontSize:"calc(0.75em + 1vmin)",background:e.palette.background.paper}}})),g=function(){var e=Object(b.f)(),t=O(),n=u.a.useState(!1),a=Object(s.a)(n,2),r=a[0],c=a[1],i=u.a.useState(""),o=Object(s.a)(i,2),l=o[0],j=o[1],m=function(){var t=parseInt(l);if(!t){var n=l.indexOf("videos/");if(n>=0){var a=l.slice(n+7),r=a.indexOf("/");t=r>=0?parseInt(a.slice(0,r)):parseInt(a)}}t?(e.push("/search/".concat(t)),e.go(0)):c(!0)};return Object(v.jsxs)("div",{className:t.root,children:[Object(v.jsx)("input",{className:t.input,type:"text",onChange:function(e){return j(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&m()},placeholder:"Analyze Vod: Enter twitch vod URL"}),Object(v.jsx)(d.a,{onClick:m,className:t.button,children:Object(v.jsx)(h.a,{})}),Object(v.jsx)(x,{message:"Vod id cannot be determined from the input",open:r,setOpen:c})]})},w=n(469),y=n(441),k=n(442),C=n(105),_=n(444),I=n(233),S=n.n(I),N=Object(i.a)((function(e){return{root:{border:"1px solid lightgrey",borderRadius:25,maxWidth:600,display:"flex",width:"100%",background:e.palette.background.paper},button:{marginLeft:"auto"},input:{border:0,flex:1,marginLeft:20,outlineStyle:"none",boxShadow:"none",borderColor:"transparent","input::-ms-clear":{display:"none"},fontSize:16,background:e.palette.background.paper}}})),D=function(){var e=Object(b.f)(),t=N(),n=u.a.useState(!1),a=Object(s.a)(n,2),r=a[0],c=a[1],i=u.a.useState(""),o=Object(s.a)(i,2),l=o[0],j=o[1],m=function(){var t=parseInt(l);if(!t){var n=l.indexOf("videos/");if(n>=0){var a=l.slice(n+7),r=a.indexOf("/");t=r>=0?parseInt(a.slice(0,r)):parseInt(a)}}t?(e.push("/search/".concat(t)),e.go(0)):c(!0)};return Object(v.jsxs)("div",{className:t.root,children:[Object(v.jsx)("input",{type:"text",onChange:function(e){return j(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&m()},placeholder:"Enter twitch vod URL",className:t.input}),Object(v.jsx)(d.a,{onClick:m,className:t.button,children:Object(v.jsx)(h.a,{})}),Object(v.jsx)(x,{message:"Vod id cannot be determined from the input",open:r,setOpen:c})]})},E=n(466),L="vods",F=function(){var e=window.localStorage.getItem(L);if(!e)return window.localStorage.setItem(L,JSON.stringify({})),{};try{return JSON.parse(e)}catch(t){return{}}},R=function(e){try{return window.localStorage.setItem(L,JSON.stringify(e)),""}catch(t){return console.log("test"),t.name}},z=function(e){var t=F();return t[e.vodID]=e,R(t)},B=function(e){var t=F();if(e in t)return t[e]},P=function(){return Object.keys(F()).length},U=n(443),T=Object(i.a)((function(e){var t;return Object(w.a)({grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:(t={fontFamily:"Alfa Slab One, cursive",color:"white"},Object(c.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(c.a)(t,"marginRight",e.spacing(2)),t),root:{flexGrow:1,backgroundColor:"transparent"},search:{marginTop:e.spacing(1),marginBottom:e.spacing(1),width:"100%"},appbar:function(e){return e.transparent?{background:"transparent"}:{}}})}));function M(e){var t=Object(b.f)(),n=T(e);return Object(v.jsx)("div",{className:n.root,children:Object(v.jsx)(y.a,{position:"static",className:n.appbar,elevation:0,children:Object(v.jsxs)(k.a,{children:[Object(v.jsx)(C.a,{className:n.title,variant:"h6",children:Object(v.jsx)(U.a,{href:"/",color:"inherit",variant:"inherit",children:"Streamalytics"})}),!e.disableSearch&&Object(v.jsx)("div",{className:n.search,children:Object(v.jsx)(D,{})}),Object(v.jsx)("div",{className:n.grow}),Object(v.jsx)(E.a,{title:"Saved vods","aria-label":"saved vods",children:Object(v.jsx)(d.a,{"aria-label":"show saved vod analytics",color:"inherit",onClick:function(){t.push("/bookmarks"),t.go(0)},children:Object(v.jsx)(_.a,{badgeContent:e.bookmarkNum?e.bookmarkNum:P(),color:"secondary",children:Object(v.jsx)(S.a,{})})})})]})})})}var V=Object(i.a)((function(e){var t;return{bar:{animation:"$comeDown 2000ms",position:"fixed",top:0,left:0,flexGrow:1,width:"100%",background:"transparent"},title:(t={fontFamily:"Alfa Slab One, cursive",color:"white"},Object(c.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(c.a)(t,"marginRight",e.spacing(2)),t),root:{display:"flex",flexDirection:"column",minHeight:200,height:"100vh",justifyContent:"center",overflow:"hidden",margin:0,padding:0,width:"100vw"},search:{width:"100%",justifyContent:"center",display:"flex",flexDirection:"row",animation:"$comeUp 2000ms"},"@keyframes comeUp":{"0%":{opacity:0,transform:"translateY(200%)"},"100%":{opacity:1,transform:"translateY(0)"}},"@keyframes comeDown":{"0%":{opacity:0,transform:"translateY(-200%)"},"100%":{opacity:1,transform:"translateY(0)"}},"@keyframes gradient":{"0%":{backgroundPosition:"0% 50%"},"50%":{backgroundPosition:"25% 50%"},"100%":{backgroundPosition:"0% 50%"}},background:{position:"fixed",width:"400%",height:"200%",background:"radial-gradient(circle, rgba(57,226,182,1) 8%, rgba(20,176,103,1) 24%, rgba(67,145,207,1) 40%, rgba(81,40,184,1) 54%, rgba(139,79,205,1) 68%, rgba(186,60,162,1) 80%, rgba(204,139,68,1) 93%)",top:"-150%",left:"-200%",zIndex:-8,transform:"rotateZ(-10deg)",backgroundPosition:"80%",backgroundSize:"400% 400%",animation:"$gradient 30s ease infinite",overflow:"hidden"},grow:{flexGrow:1}}})),A=function(){var e=V();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:e.bar,children:Object(v.jsx)(M,{transparent:!0,disableSearch:!0})}),Object(v.jsxs)(o.a,{maxWidth:!1,className:e.root,children:[Object(v.jsx)("div",{className:e.background}),Object(v.jsx)("div",{className:e.search,children:Object(v.jsx)(g,{})})]})]})},G=(n(274),n(16)),W=n.n(G),H=n(29),J=n(104),K=n(71),Y=n.n(K),$={headers:{"Client-ID":"kimne78kx3ncx6brgo4mv6wki5h1ko"}},Z=function(){var e=Object(H.a)(W.a.mark((function e(t){var n,a,r,c,i=arguments;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,a="https://api.twitch.tv/v5/videos/".concat(t,"/comments?content_offset_seconds=").concat(n),e.prev=2,e.next=5,Y.a.get(a,$);case 5:return r=e.sent,c=r.data,e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{comments:[]});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(H.a)(W.a.mark((function e(t,n){var a,r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.twitch.tv/v5/videos/".concat(t,"/comments?cursor=").concat(n),e.prev=1,e.next=4,Y.a.get(a,$);case 4:return r=e.sent.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{comments:[]});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(H.a)(W.a.mark((function e(t){var n,a,r,c,i,o,s,l,u,d=arguments;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:null,a=d.length>2&&void 0!==d[2]?d[2]:0,r=d.length>3&&void 0!==d[3]?d[3]:2e5,c=r-a,!(a<0||r<0||r<a)){e.next=8;break}return e.abrupt("return",[]);case 8:if(!(c<5e3)){e.next=25;break}return e.next=11,Z(t,a);case 11:i=e.sent,o=i.comments.filter((function(e){var t=e.content_offset_seconds;return a<=t&&t<r})).map((function(e){var t=e.content_offset_seconds,a=e._id,r=e.message,c=e.commenter;return n&&n.updateProgress(1),{content_offset_seconds:t,_id:a,message:{body:r.body},commenter:{display_name:c.display_name}}}));case 13:if(!i.comments.length||!i._next){e.next=22;break}if(!(i.comments[i.comments.length-1].content_offset_seconds>r)){e.next=16;break}return e.abrupt("break",22);case 16:return e.next=18,q(t,i._next);case 18:i=e.sent,o.push.apply(o,Object(J.a)(i.comments.filter((function(e){var t=e.content_offset_seconds;return a<=t&&t<r})).map((function(e){var t=e.content_offset_seconds,a=e._id,r=e.message,c=e.commenter;return n&&n.updateProgress(1),{content_offset_seconds:t,_id:a,message:{body:r.body},commenter:{display_name:c.display_name}}})))),e.next=13;break;case 22:return e.abrupt("return",o);case 25:for(s=[],l=50,u=1;u<=l;u++)s.push(Q(t,n,a+(u-1)*c/l,a+u*c/l));return e.abrupt("return",Promise.all(s).then((function(e){return e.reduce((function(e,t){return e.push.apply(e,Object(J.a)(t)),e}))})));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=n(234),ee=n(235),te=function(){function e(t){Object(X.a)(this,e),this.progress=void 0,this.onUpdate=void 0,this.progress=0,this.onUpdate=t}return Object(ee.a)(e,[{key:"updateProgress",value:function(e){this.progress+=Math.abs(e),this.onUpdate&&this.onUpdate(this.progress,!1)}},{key:"finish",value:function(){this.onUpdate&&this.onUpdate(this.progress,!0)}}]),e}(),ne={headers:{"Client-ID":"kimne78kx3ncx6brgo4mv6wki5h1ko"}},ae=function(){var e=Object(H.a)(W.a.mark((function e(t){var n,a,r,c,i;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.twitch.tv/v5/videos/".concat(t),e.prev=1,a={title:"",views:0,url:"",language:"",created_at:"",published_at:"",recorded_at:"",game:"",length:0,preview:{small:"",medium:"",large:""},channel:{display_name:"",logo:"",url:"",_id:""}},e.next=5,Y.a.get(n,ne);case 5:for(c in r=e.sent.data,a)if("object"===typeof a[c])for(i in a[c])a[c][i]=r[c][i];else a[c]=r[c];return e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(H.a)(W.a.mark((function e(t,n){var a,r,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new te(n),e.next=3,ae(t);case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,Q(t,a,0,r.length);case 8:return c=e.sent,a.finish(),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(0===e.length)return{increment:t,speeds:[]};var n=e[e.length-1].content_offset_seconds,a=Array(2+~~(n/t)).fill(0);return e.forEach((function(e){var n=e.content_offset_seconds;a[~~(n/t)]+=1/t})),{increment:t,speeds:a}},ie=function(e,t){for(var n=e.speeds.map((function(e){return e/t})),a=[],r=0;r<n.length;){for(var c=0,i=0;i<t&&r!==n.length;i++)c+=n[r],r++;a.push(c)}return{increment:e.increment*t,speeds:a}},oe=function(){var e=Object(H.a)(W.a.mark((function e(t,n){var a,r,c,i,o,s,l,u,d,b,j;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(t);case 2:if(!(a=e.sent)){e.next=27;break}return e.prev=4,e.next=7,Y.a.get("/api/emotes/".concat(a.channel._id));case 7:for(u in r=e.sent.data,c={},r.forEach((function(e){c[e.emoteName.toLowerCase()]={url:e.emoteImgURL,name:e.emoteName}})),i={},o=0,n.map((function(e){return e.message.body.trim().toLowerCase().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"")})).filter((function(e){return e.length>0})).forEach((function(e){var t=e.split(" "),n=new Set;t.forEach((function(e){var t=e.trim();t in c&&!n.has(t)&&(n.add(c[t].name),t in i||(i[t]=0),i[t]++,o++)}))})),s=[],l=["#2d080a","#c2f970","#7c3626","#a499b3","#f5853f","#89d2dc","#093824","#98a6d4","#ffcdbc","#6564db"],i)s.push({title:c[u].name,value:100*i[u]/o,color:"#E38627",url:c[u].url});for(s.sort((function(e,t){return e.value>=t.value?-1:0})),d=[],b=0,j=0;j<s.length;j++)s[j].value>=1?d.push(Object(m.a)(Object(m.a)({},s[j]),{},{color:l[j%l.length]})):b+=s[j].value;return b>0&&d.push({title:"Other",value:b,color:"#E38627",url:""}),e.abrupt("return",d);case 24:return e.prev=24,e.t0=e.catch(4),e.abrupt("return",[{title:"Error",value:100,color:"#E38627",url:""}]);case 27:return e.abrupt("return",[{title:"Error",value:100,color:"#E38627",url:""}]);case 28:case"end":return e.stop()}}),e,null,[[4,24]])})));return function(t,n){return e.apply(this,arguments)}}(),se=Object(i.a)((function(e){return{title:{marginBottom:e.spacing(2),fontFamily:"'New Tegomin', serif"},subtitle:{fontFamily:"'New Tegomin', serif"},info:{margin:e.spacing(5)}}})),le=function(){var e=se();return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:e.info,children:[Object(v.jsx)(C.a,{variant:"h2",component:"h1",className:e.title,align:"center",children:Object(v.jsx)("b",{children:" Uh Oh! "})}),Object(v.jsx)(C.a,{variant:"h4",component:"h2",className:e.subtitle,align:"center",children:"The VOD you are looking for doesn't seem to exist!"})]})})},ue=n(454),de=n(446),be=n(447),je=n(470),he=n(448),me=n(449),pe=n(450),fe=n(451),ve=Object(i.a)({media:{height:0,paddingTop:"56.25%"}}),xe=function(e){var t=e.vodID,n=e.elevation,a=e.downloadComments,r=e.saveVod,c=e.loadComments,i=ve(),o=u.a.useState(null),l=Object(s.a)(o,2),b=l[0],j=l[1];return u.a.useEffect((function(){Object(H.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=j,e.next=3,ae(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[t]),b?Object(v.jsxs)(de.a,{elevation:n,children:[Object(v.jsx)(be.a,{avatar:Object(v.jsx)(d.a,{onClick:function(){window.open(b.channel.url)},children:Object(v.jsx)(je.a,{"aria-label":"avatar image",src:b.channel.logo})}),title:Object(v.jsx)(C.a,{variant:"subtitle1",children:b.title}),subheader:Object(v.jsxs)(C.a,{variant:"subtitle2",children:["By"," ",Object(v.jsx)(U.a,{href:b.channel.url,target:"_blank",rel:"noreferrer",children:b.channel.display_name})," ","at ",new Date(b.recorded_at).toDateString()]})}),Object(v.jsx)(he.a,{onClick:function(){window.open(b.url)},children:Object(v.jsx)(me.a,{image:b.preview.large,title:"Go to vod",className:i.media})}),Object(v.jsxs)(pe.a,{children:[Object(v.jsx)(fe.a,{size:"small",color:"primary",onClick:a,children:"download comments"}),Object(v.jsx)(fe.a,{size:"small",color:"primary",onClick:r,children:"save analytics"}),Object(v.jsx)(fe.a,{size:"small",color:"primary",onClick:Object(H.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:t in F()&&r();case 3:case"end":return e.stop()}}),e)}))),children:"Reload Analytics"})]})]}):Object(v.jsx)(de.a,{elevation:n,children:Object(v.jsx)(be.a,{title:Object(v.jsx)(C.a,{variant:"subtitle1",children:"Loading..."})})})},Oe=n(453),ge=n(471),we=n(459),ye=n(462),ke=n(475),Ce=n(468),_e=n(457),Ie=function(){return{width:window.innerWidth,height:window.innerHeight}},Se=function(){var e=Object(l.useState)(Ie()),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(l.useEffect)((function(){var e=function(){return a(Ie())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n},Ne=function(e){var t,n=Object(we.a)("zoom","voronoi"),a=u.a.useState([0,1e6]),r=Object(s.a)(a,2),c=r[0],i=r[1],o=Se().width,l=u.a.useState(0),d=Object(s.a)(l,2),b=d[0],j=d[1],h=u.a.useCallback((function(e){null!==e&&j(e.getBoundingClientRect().width)}),[o]);return Object(v.jsx)("div",{style:{width:"100%",height:"100%"},ref:h,children:Object(v.jsxs)(ye.a,{height:300,width:b,padding:{top:50,left:80,right:50,bottom:50},domain:function(){if(e.data.speeds.length)return{x:[0,e.data.speeds.length*e.data.increment],y:[0,Math.max.apply(Math,Object(J.a)(e.data.speeds))+.5]}}(),containerComponent:Object(v.jsx)(n,{zoomDimension:"x",responsive:!1,onZoomDomainChange:function(e){i(e.x)}}),children:[Object(v.jsx)(ke.a,{dependentAxis:!0,label:"Messages",tickFormat:function(e){return e},axisLabelComponent:Object(v.jsx)(Ce.a,{dy:-20})}),Object(v.jsx)(ke.a,{label:"Time (s)"}),Object(v.jsx)(_e.a,{data:(t=ie(e.data,e.flatten),t.speeds.map((function(e,n){return{time:n*t.increment,speed:e}}))).filter((function(e){return e.time>=c[0]&&e.time<=c[1]})),interpolation:"natural",x:"time",y:"speed"})]})})},De=Object(i.a)((function(e){return{slider:{paddingLeft:e.spacing(10),paddingRight:e.spacing(5),width:250,margin:0},header:{paddingBottom:0},chart:{marginTop:-40,paddingBottom:0},action:{margin:0,padding:0,marginBottom:e.spacing(1)}}})),Ee=function(e){var t=e.vodInfo,n=e.elevation,a=De(),r=u.a.useState(1),c=Object(s.a)(r,2),i=c[0],o=c[1];return Object(v.jsxs)(de.a,{elevation:n,children:[Object(v.jsx)(be.a,{title:Object(v.jsx)(C.a,{variant:"subtitle1",children:"Number of Chat Messages"}),subheader:Object(v.jsx)(C.a,{variant:"subtitle2",children:"Zoom in and drag to check out the graph"}),className:a.header}),Object(v.jsx)(Oe.a,{className:a.chart,children:Object(v.jsx)(Ne,{data:t.speeds,flatten:i,vodID:t.vodID})}),Object(v.jsx)(pe.a,{className:a.action,children:Object(v.jsx)("div",{className:a.slider,children:Object(v.jsx)(ge.a,{value:i,marks:[{value:1,label:"Most detailed"},{value:10,label:"Least detailed"}],min:1,max:10,defaultValue:i,onChange:function(e,t){o(t)},"aria-labelledby":"flatten size"})})})]})},Le=n(251),Fe=function(e){var t=e.data,n=e.setHoveredData;return Object(v.jsx)("div",{children:Object(v.jsx)(Le.PieChart,{data:t,onMouseOver:function(e,a){n(t[a])},onMouseOut:function(){n(null)}})})},Re=Object(i.a)((function(e){return{slider:{paddingLeft:e.spacing(10),paddingRight:e.spacing(5),width:250,margin:0},header:{paddingBottom:0},action:{margin:0,padding:0,marginBottom:e.spacing(1)},pie:{justifyItems:"center",maxWidth:"45vw"},content:{display:"flex"},info:{alignSelf:"center",marginLeft:e.spacing(3)}}})),ze=function(e){var t=e.vodInfo,n=e.elevation,a=u.a.useState(null),r=Object(s.a)(a,2),c=r[0],i=r[1],o=Re();return Object(v.jsxs)(de.a,{elevation:n,children:[Object(v.jsx)(be.a,{title:Object(v.jsx)(C.a,{variant:"subtitle1",children:"Most Frequent Emotes"}),subheader:Object(v.jsx)(C.a,{variant:"subtitle2",children:"Hover over for info"}),className:o.header}),Object(v.jsxs)(Oe.a,{className:o.content,children:[Object(v.jsx)("div",{className:o.pie,children:Object(v.jsx)(Fe,{data:t.mostCommonKeywords,setHoveredData:i})}),Object(v.jsx)("div",{className:o.info,children:c&&Object(v.jsxs)("div",{children:[Object(v.jsxs)(C.a,{component:"h4",variant:"h6",children:[c.title," (",Math.round(c.value),"%)"]}),c.url&&Object(v.jsx)("img",{src:c.url,alt:"".concat(c.title)})]})})]}),Object(v.jsx)(pe.a,{className:o.action})]})},Be=Object(i.a)((function(e){return{loadedText:{margin:e.spacing(5),fontFamily:"'Delta Gothic One', cursive"}}})),Pe=function(){var e=Be(),t=u.a.useState({vodID:-1,speeds:{increment:1,speeds:[]},mostCommonKeywords:[]}),n=Object(s.a)(t,2),a=n[0],r=n[1],c=u.a.useState(!1),i=Object(s.a)(c,2),l=i[0],d=i[1],j=u.a.useState(-2),h=Object(s.a)(j,2),m=h[0],p=h[1],f=u.a.useState(!1),O=Object(s.a)(f,2),g=O[0],w=O[1],y=u.a.useState(""),k=Object(s.a)(y,2),_=k[0],I=k[1],S=u.a.useState(null),N=Object(s.a)(S,2),D=N[0],E=N[1],L=u.a.useState(P()),F=Object(s.a)(L,2),R=F[0],U=F[1],T=Object(b.g)().vodID,V=function(){var e=Object(H.a)(W.a.mark((function e(){var t,n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(T,(function(e,t){p(t?-1:e)}));case 2:if(null!==(t=e.sent)){e.next=6;break}return d(!0),e.abrupt("return",[]);case 6:return E(t),e.t0=T,e.t1=ce(t),e.next=11,oe(T,t);case 11:return e.t2=e.sent,n={vodID:e.t0,speeds:e.t1,mostCommonKeywords:e.t2},r(n),e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();u.a.useEffect((function(){var e=B(T);e?(p(-1),r(e)):V()}),[T]);var A=function(){var e=Object(H.a)(W.a.mark((function e(){var t,n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=R,B(T)||t++,""!==(n=z(a))){e.next=8;break}return U(t),e.abrupt("return");case 8:"QuotaExceededError"===n?(w(!0),I("Not enough memory to save the vod, remove some vods in bookmarks")):(w(!0),I("ERROR: Could not save vod due to ".concat(n)));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(H.a)(W.a.mark((function e(){var t,n,a,r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=D){e.next=5;break}return e.next=4,re(T,null);case 4:t=e.sent;case 5:null!==t&&(n="VodID: ".concat(T,"\n").concat(t.map((function(e){return"".concat(e.commenter.display_name,"[").concat(e.content_offset_seconds,"s]: ").concat(e.message.body)})).join("\n")),a=document.createElement("a"),r=new Blob([n],{type:"text/plain;charset=utf-8"}),a.href=URL.createObjectURL(r),a.download="comments.txt",document.body.appendChild(a),a.click(),document.body.removeChild(a));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(M,{bookmarkNum:R}),Object(v.jsxs)(o.a,{maxWidth:"xl",children:[Object(v.jsx)("br",{}),l?Object(v.jsx)(le,{}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ue.a,{container:!0,spacing:3,children:-1===m&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ue.a,{item:!0,xs:5,md:5,xl:5,children:Object(v.jsx)(xe,{vodID:T,elevation:5,downloadComments:G,saveVod:A,loadComments:V})}),Object(v.jsx)(ue.a,{item:!0,xs:12,xl:6,children:Object(v.jsx)(Ee,{elevation:5,vodInfo:a})}),Object(v.jsx)(ue.a,{item:!0,xs:12,xl:6,children:Object(v.jsx)(ze,{elevation:5,vodInfo:a})})]})}),m>=0&&Object(v.jsxs)(C.a,{component:"h2",variant:"h4",align:"center",className:e.loadedText,children:["Loaded ",m," comments..."]})]}),Object(v.jsx)(x,{message:_,setOpen:w,open:g})]})]})},Ue=n(460),Te=n(455),Me=Object(i.a)({media:{height:0,paddingTop:"56.25%"}}),Ve=function(){var e=u.a.useState(function(){var e=[],t=F();for(var n in t)e.push(t[n]);return e}()),t=Object(s.a)(e,2),n=t[0],a=t[1],r=u.a.useState(Array(n.length).fill(-1)),c=Object(s.a)(r,2),i=c[0],l=c[1],j=Me();u.a.useEffect((function(){Object(H.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.map((function(e){return ae(e.vodID)})),e.t0=l,e.next=4,Promise.all(t);case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})))()}),[n]);var h=function(e,t){return function(){l(i.filter((function(e,n){return n!==t}))),a(n.filter((function(e,n){return n!==t}))),function(e){var t=F();e in t&&delete t[e],R(t)}(e)}},m=function(e){var t=e.cardInner;return Object(v.jsx)(ue.a,{item:!0,xs:12,sm:12,md:6,lg:4,children:Object(v.jsx)(de.a,{elevation:5,children:t})})},p=Object(b.f)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(M,{}),Object(v.jsxs)(o.a,{maxWidth:"xl",children:[Object(v.jsx)("br",{}),Object(v.jsx)(ue.a,{container:!0,spacing:3,children:n.map((function(e,t){return null===i[t]?Object(v.jsx)(m,{cardInner:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Oe.a,{children:Object(v.jsxs)(C.a,{variant:"subtitle1",children:["Could not find vod with vod id ",e.vodID," (Vod might have expired)"]})}),Object(v.jsx)(pe.a,{children:Object(v.jsx)(fe.a,{size:"small",color:"primary",onClick:h(e.vodID,t),children:"Remove vod"})})," "]})},e.vodID):-1===i[t]?Object(v.jsx)(m,{cardInner:Object(v.jsx)(Oe.a,{children:Object(v.jsxs)(C.a,{variant:"subtitle1",children:["Loading ",e.vodID]})})},e.vodID):Object(v.jsx)(m,{cardInner:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(be.a,{avatar:Object(v.jsx)(d.a,{onClick:function(){window.open(i[t].channel.url)},children:Object(v.jsx)(je.a,{"aria-label":"avatar image",src:i[t].channel.logo})}),title:Object(v.jsx)(C.a,{variant:"subtitle1",children:i[t].title}),subheader:Object(v.jsxs)(C.a,{variant:"subtitle2",children:["By"," ",Object(v.jsx)(U.a,{href:i[t].channel.url,target:"_blank",rel:"noreferrer",children:i[t].channel.display_name})," ","at"," ",new Date(i[t].recorded_at).toDateString()]})}),Object(v.jsx)(he.a,{onClick:function(){window.open(i[t].url)},children:Object(v.jsx)(me.a,{image:i[t].preview.large,title:"Go to vod",className:j.media})}),Object(v.jsxs)(pe.a,{children:[Object(v.jsx)(fe.a,{size:"small",color:"primary",onClick:function(){p.push("/search/".concat(e.vodID)),p.go(0)},children:"Analytics"}),Object(v.jsx)(fe.a,{size:"small",color:"primary",onClick:h(e.vodID,t),children:"Remove vod"})]})]})},e.vodID)}))})]})]})},Ae=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Te.a,{}),Object(v.jsx)(Ue.b,{injectFirst:!0,children:Object(v.jsxs)(b.c,{children:[Object(v.jsx)(b.a,{path:"/search/:vodID",children:Object(v.jsx)(Pe,{})}),Object(v.jsx)(b.a,{path:"/bookmarks",children:Object(v.jsx)(Ve,{})}),Object(v.jsx)(b.a,{path:"/",children:Object(v.jsx)(A,{})})]})})]})},Ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,476)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},We=n(75),He=n(456),Je=n(252),Ke=Object(Je.a)({palette:{primary:{main:"#7015c2"},secondary:{main:"#25e220"},background:{default:"azure",paper:"azure"}}});r.a.render(Object(v.jsx)(He.a,{theme:Ke,children:Object(v.jsx)(We.a,{children:Object(v.jsx)(Ae,{})})}),document.getElementById("root")),Ge()}},[[405,1,2]]]);
//# sourceMappingURL=main.3b848855.chunk.js.map