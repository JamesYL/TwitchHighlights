(this.webpackJsonptwitchhighlights=this.webpackJsonptwitchhighlights||[]).push([[0],{412:function(e,t,n){"use strict";n.r(t);var a=n(32),r=n.n(a),c=n(65),o=n(447),i=n(452),s=n(17),u=n(1),l=n.n(u),d=n(446),h=n(21),b=n(130),f=n.n(b),j=n(68),m=n(472),p=n(470),v=n(4),x=function(e){var t=function(){e.setOpen(!1)};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(m.a,Object(j.a)(Object(j.a)({open:e.open,autoHideDuration:5e3,onClose:t},e.snackbarProps),{},{children:Object(v.jsx)(p.a,Object(j.a)(Object(j.a)({elevation:6,variant:"filled",severity:"error"},e.alertProps),{},{onClose:t,children:e.message}))}))})},O=Object(o.a)((function(e){return{root:{border:"1px solid #696969",borderRadius:25,display:"flex",width:"100%",maxWidth:800,background:e.palette.background.paper},button:{marginLeft:"auto",marginTop:e.spacing(2),marginBottom:e.spacing(2)},input:{border:0,flex:1,marginLeft:20,outlineStyle:"none",boxShadow:"none",borderColor:"transparent","input::-ms-clear":{display:"none"},fontSize:"calc(0.75em + 1vmin)",background:e.palette.background.paper}}})),g=function(){var e=Object(h.f)(),t=O(),n=l.a.useState(!1),a=Object(s.a)(n,2),r=a[0],c=a[1],o=l.a.useState(""),i=Object(s.a)(o,2),u=i[0],b=i[1],j=function(){var t=parseInt(u);if(!t){var n=u.indexOf("videos/");if(n>=0){var a=u.slice(n+7),r=a.indexOf("/");t=r>=0?parseInt(a.slice(0,r)):parseInt(a)}}t?(e.push("/search/".concat(t)),e.go(0)):c(!0)};return Object(v.jsxs)("div",{className:t.root,children:[Object(v.jsx)("input",{className:t.input,type:"text",onChange:function(e){return b(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&j()},placeholder:"Analyze Vod: Enter twitch vod URL"}),Object(v.jsx)(d.a,{onClick:j,className:t.button,children:Object(v.jsx)(f.a,{})}),Object(v.jsx)(x,{message:"Vod id cannot be determined from the input",open:r,setOpen:c})]})},w=n(13),k=n.n(w),y=n(23),I=n(476),D=n(448),C=n(449),N=n(107),_=n(451),S=n(241),F=n.n(S),E=Object(o.a)((function(e){return{root:{border:"1px solid lightgrey",borderRadius:25,maxWidth:600,display:"flex",width:"100%",background:e.palette.background.paper},button:{marginLeft:"auto"},input:{border:0,flex:1,marginLeft:20,outlineStyle:"none",boxShadow:"none",borderColor:"transparent","input::-ms-clear":{display:"none"},fontSize:16,background:e.palette.background.paper}}})),L=function(){var e=Object(h.f)(),t=E(),n=l.a.useState(!1),a=Object(s.a)(n,2),r=a[0],c=a[1],o=l.a.useState(""),i=Object(s.a)(o,2),u=i[0],b=i[1],j=function(){var t=parseInt(u);if(!t){var n=u.indexOf("videos/");if(n>=0){var a=u.slice(n+7),r=a.indexOf("/");t=r>=0?parseInt(a.slice(0,r)):parseInt(a)}}t?(e.push("/search/".concat(t)),e.go(0)):c(!0)};return Object(v.jsxs)("div",{className:t.root,children:[Object(v.jsx)("input",{type:"text",onChange:function(e){return b(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&j()},placeholder:"Enter twitch vod URL",className:t.input}),Object(v.jsx)(d.a,{onClick:j,className:t.button,children:Object(v.jsx)(f.a,{})}),Object(v.jsx)(x,{message:"Vod id cannot be determined from the input",open:r,setOpen:c})]})},z=n(473),B=n(172),P=n(60),R=n(80),U=n(236),T=n(259),M=new(function(e){Object(U.a)(n,e);var t=Object(T.a)(n);function n(){var e;return Object(P.a)(this,n),(e=t.call(this,"Database")).vod=void 0,e.channel=void 0,e.version(1).stores({vod:"vodID",channel:"channelID, name"}),e.vod=e.table("vod"),e.channel=e.table("channel"),e}return n}(n(239).a)),A=function(){function e(t,n,a,r){Object(P.a)(this,e),this.vodID=void 0,this.channelID=void 0,this.comments=void 0,this.vodInfo=void 0,this.vodID=t,this.channelID=n,this.comments=a,this.vodInfo=r}return Object(R.a)(e,[{key:"save",value:function(){M.vod.put(this)}},{key:"getComments",value:function(){return this.comments}}]),e}(),V=function(){return M.vod.count()},G=function(){function e(t,n,a){Object(P.a)(this,e),this.channelID=void 0,this.name=void 0,this.channel=void 0,this.channelID=t,this.name=n,this.channel=a}return Object(R.a)(e,[{key:"save",value:function(){M.channel.put(this)}}]),e}(),W=function(e){return M.channel.get(e)},H=function(){var e=Object(y.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r=t,M.vod.get(r);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,W(n.channelID);case 7:if(a=e.sent){e.next=10;break}return e.abrupt("return",null);case 10:return e.abrupt("return",{vodID:n.vodID,channelID:a.channelID,channelName:a.name,channelInfo:a.channel,vodInfo:n.vodInfo,comments:n.comments});case 11:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(e,t,n){var a=t.channel,r=Object(B.a)(t,["channel"]);return{vodID:e,channelID:a._id,channelName:a.display_name,channelInfo:{logo:a.logo,url:a.url},vodInfo:r,comments:Z(n)}},Z=function(e){return e.map((function(e){return{seconds:e.content_offset_seconds,message:e.message.body,commenter:e.commenter.display_name}}))},$=function(e,t,n){var a=new G(t.channel._id,t.channel.display_name,{logo:t.channel.logo,url:t.channel.url});a.save();t.channel;var r=Object(B.a)(t,["channel"]);new A(e,a.channelID,Z(n),r).save()},q=function(e){return t=e,M.vod.where("vodID").equals(t).delete();var t},J=function(){return V()},K=function(){var e=Object(y.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Promise,e.next=3,M.vod.toArray();case 3:return e.t1=e.sent.map((function(e){return H(e.vodID)})),e.abrupt("return",e.t0.all.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=n(450),X=Object(o.a)((function(e){var t;return Object(I.a)({grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:(t={fontFamily:"Alfa Slab One, cursive",color:"white"},Object(c.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(c.a)(t,"marginRight",e.spacing(2)),t),root:{flexGrow:1,backgroundColor:"transparent"},search:{marginTop:e.spacing(1),marginBottom:e.spacing(1),width:"100%"},appbar:function(e){return e.transparent?{background:"transparent"}:{}}})}));function ee(e){var t=e.transparent,n=e.disableSearch,a=e.bookmarkNum,r=Object(h.f)(),c=X({transparent:t}),o=l.a.useState(a),i=Object(s.a)(o,2),u=i[0],b=i[1];return l.a.useEffect((function(){Object(y.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=8;break}return e.t0=b,e.next=4,J();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=9;break;case 8:b(a);case 9:case"end":return e.stop()}}),e)})))()}),[a]),Object(v.jsx)("div",{className:c.root,children:Object(v.jsx)(D.a,{position:"static",className:c.appbar,elevation:0,children:Object(v.jsxs)(C.a,{children:[Object(v.jsx)(N.a,{className:c.title,variant:"h6",children:Object(v.jsx)(Q.a,{href:"/",color:"inherit",variant:"inherit",children:"Streamalytics"})}),!n&&Object(v.jsx)("div",{className:c.search,children:Object(v.jsx)(L,{})}),Object(v.jsx)("div",{className:c.grow}),Object(v.jsx)(z.a,{title:"Saved vods","aria-label":"saved vods",children:Object(v.jsx)(d.a,{"aria-label":"show saved vod analytics",color:"inherit",onClick:function(){r.push("/bookmarks"),r.go(0)},children:Object(v.jsx)(_.a,{badgeContent:u||null,color:"secondary",children:Object(v.jsx)(F.a,{})})})})]})})})}var te=Object(o.a)((function(e){var t;return{bar:{animation:"$comeDown 2000ms",position:"fixed",top:0,left:0,flexGrow:1,width:"100%",background:"transparent"},title:(t={fontFamily:"Alfa Slab One, cursive",color:"white"},Object(c.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(c.a)(t,"marginRight",e.spacing(2)),t),root:{display:"flex",flexDirection:"column",minHeight:200,height:"100vh",justifyContent:"center",overflow:"hidden",margin:0,padding:0,width:"100vw"},search:{width:"100%",justifyContent:"center",display:"flex",flexDirection:"row",animation:"$comeUp 2000ms"},"@keyframes comeUp":{"0%":{opacity:0,transform:"translateY(200%)"},"100%":{opacity:1,transform:"translateY(0)"}},"@keyframes comeDown":{"0%":{opacity:0,transform:"translateY(-200%)"},"100%":{opacity:1,transform:"translateY(0)"}},"@keyframes gradient":{"0%":{backgroundPosition:"0% 50%"},"50%":{backgroundPosition:"25% 50%"},"100%":{backgroundPosition:"0% 50%"}},background:{position:"fixed",width:"400%",height:"200%",background:"radial-gradient(circle, rgba(57,226,182,1) 8%, rgba(20,176,103,1) 24%, rgba(67,145,207,1) 40%, rgba(81,40,184,1) 54%, rgba(139,79,205,1) 68%, rgba(186,60,162,1) 80%, rgba(204,139,68,1) 93%)",top:"-150%",left:"-200%",zIndex:-8,transform:"rotateZ(-10deg)",backgroundPosition:"80%",backgroundSize:"400% 400%",animation:"$gradient 30s ease infinite",overflow:"hidden"},grow:{flexGrow:1}}})),ne=function(){var e=te();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:e.bar,children:Object(v.jsx)(ee,{transparent:!0,disableSearch:!0})}),Object(v.jsxs)(i.a,{maxWidth:!1,className:e.root,children:[Object(v.jsx)("div",{className:e.background}),Object(v.jsx)("div",{className:e.search,children:Object(v.jsx)(g,{})})]})]})},ae=(n(282),n(106)),re=n(72),ce=n.n(re),oe={headers:{"Client-ID":"kimne78kx3ncx6brgo4mv6wki5h1ko"}},ie=function(){var e=Object(y.a)(k.a.mark((function e(t){var n,a,r,c,o=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:0,a="https://api.twitch.tv/v5/videos/".concat(t,"/comments?content_offset_seconds=").concat(n),e.prev=2,e.next=5,ce.a.get(a,oe);case 5:return r=e.sent,c=r.data,e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{comments:[]});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(y.a)(k.a.mark((function e(t,n){var a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.twitch.tv/v5/videos/".concat(t,"/comments?cursor=").concat(n),e.prev=1,e.next=4,ce.a.get(a,oe);case 4:return r=e.sent.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{comments:[]});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=Object(y.a)(k.a.mark((function e(t){var n,a,r,c,o,i,s,u,l,d=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:null,a=d.length>2&&void 0!==d[2]?d[2]:0,r=d.length>3&&void 0!==d[3]?d[3]:2e5,c=r-a,!(a<0||r<0||r<a)){e.next=8;break}return e.abrupt("return",[]);case 8:if(!(c<5e3)){e.next=25;break}return e.next=11,ie(t,a);case 11:o=e.sent,i=o.comments.filter((function(e){var t=e.content_offset_seconds;return a<=t&&t<r})).map((function(e){var t=e.content_offset_seconds,a=e._id,r=e.message,c=e.commenter;return n&&n.updateProgress(1),{content_offset_seconds:t,_id:a,message:{body:r.body},commenter:{display_name:c.display_name}}}));case 13:if(!o.comments.length||!o._next){e.next=22;break}if(!(o.comments[o.comments.length-1].content_offset_seconds>r)){e.next=16;break}return e.abrupt("break",22);case 16:return e.next=18,se(t,o._next);case 18:o=e.sent,i.push.apply(i,Object(ae.a)(o.comments.filter((function(e){var t=e.content_offset_seconds;return a<=t&&t<r})).map((function(e){var t=e.content_offset_seconds,a=e._id,r=e.message,c=e.commenter;return n&&n.updateProgress(1),{content_offset_seconds:t,_id:a,message:{body:r.body},commenter:{display_name:c.display_name}}})))),e.next=13;break;case 22:return e.abrupt("return",i);case 25:for(s=[],u=50,l=1;l<=u;l++)s.push(ue(t,n,a+(l-1)*c/u,a+l*c/u));return e.abrupt("return",Promise.all(s).then((function(e){return e.reduce((function(e,t){return e.push.apply(e,Object(ae.a)(t)),e}))})));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){function e(t){Object(P.a)(this,e),this.progress=void 0,this.onUpdate=void 0,this.progress=0,this.onUpdate=t}return Object(R.a)(e,[{key:"updateProgress",value:function(e){this.progress+=Math.abs(e),this.onUpdate&&this.onUpdate(this.progress,!1)}},{key:"finish",value:function(){this.onUpdate&&this.onUpdate(this.progress,!0)}}]),e}(),de={headers:{"Client-ID":"kimne78kx3ncx6brgo4mv6wki5h1ko"}},he=function(){var e=Object(y.a)(k.a.mark((function e(t){var n,a,r,c,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.twitch.tv/v5/videos/".concat(t),a={title:"",views:0,url:"",language:"",created_at:"",published_at:"",recorded_at:"",game:"",length:0,preview:{small:"",medium:"",large:""},channel:{display_name:"",logo:"",url:"",_id:""}},e.next=4,ce.a.get(n,de);case 4:for(c in r=e.sent.data,a)if("object"===typeof a[c])for(o in a[c])a[c][o]=r[c][o];else a[c]=r[c];return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(y.a)(k.a.mark((function e(t,n){var a,r,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new le(n),e.next=3,he(t);case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,ue(t,a,0,r.length);case 8:return c=e.sent,a.finish(),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(0===e.length)return{increment:t,speeds:[]};var n=e[e.length-1].seconds,a=Array(2+~~(n/t)).fill(0);return e.forEach((function(e){var n=e.seconds;a[~~(n/t)]+=1/t})),{increment:t,speeds:a}},je=function(e,t){for(var n=e.speeds.map((function(e){return e/t})),a=[],r=0;r<n.length;){for(var c=0,o=0;o<t&&r!==n.length;o++)c+=n[r],r++;a.push(c)}return{increment:e.increment*t,speeds:a}},me=Object(o.a)((function(e){return{title:{marginBottom:e.spacing(2),fontFamily:"'New Tegomin', serif"},subtitle:{fontFamily:"'New Tegomin', serif"},info:{margin:e.spacing(5)}}})),pe=function(){var e=me();return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:e.info,children:[Object(v.jsx)(N.a,{variant:"h2",component:"h1",className:e.title,align:"center",children:Object(v.jsx)("b",{children:" Uh Oh! "})}),Object(v.jsx)(N.a,{variant:"h4",component:"h2",className:e.subtitle,align:"center",children:"The VOD you are looking for doesn't seem to exist!"})]})})},ve=n(461),xe=n(453),Oe=n(454),ge=n(477),we=n(455),ke=n(456),ye=n(457),Ie=n(458),De=Object(o.a)({media:{height:0,paddingTop:"56.25%"}}),Ce=function(e){var t=e.vodInfo,n=e.elevation,a=e.downloadComments,r=e.saveVod,c=De();return Object(v.jsxs)(xe.a,{elevation:n,children:[Object(v.jsx)(Oe.a,{avatar:Object(v.jsx)(d.a,{onClick:function(){window.open(t.channelInfo.url)},children:Object(v.jsx)(ge.a,{"aria-label":"avatar image",src:t.channelInfo.logo})}),title:Object(v.jsx)(N.a,{variant:"subtitle1",children:t.vodInfo.title}),subheader:Object(v.jsxs)(N.a,{variant:"subtitle2",children:["By"," ",Object(v.jsx)(Q.a,{href:t.channelInfo.url,target:"_blank",rel:"noreferrer",children:t.channelName})," ","at ",new Date(t.vodInfo.recorded_at).toDateString()]})}),Object(v.jsx)(we.a,{onClick:function(){window.open(t.vodInfo.url)},children:Object(v.jsx)(ke.a,{image:t.vodInfo.preview.large,title:"Go to vod",className:c.media})}),Object(v.jsxs)(ye.a,{children:[Object(v.jsx)(Ie.a,{size:"small",color:"primary",onClick:a,children:"download comments"}),Object(v.jsx)(Ie.a,{size:"small",color:"primary",onClick:r,children:"save analytics"})]})]})},Ne=n(460),_e=n(478),Se=n(466),Fe=n(469),Ee=n(482),Le=n(475),ze=n(464),Be=function(){return{width:window.innerWidth,height:window.innerHeight}},Pe=function(){var e=Object(u.useState)(Be()),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(u.useEffect)((function(){var e=function(){return a(Be())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n},Re=function(e){var t,n=Object(Se.a)("zoom","voronoi"),a=l.a.useState([0,1e6]),r=Object(s.a)(a,2),c=r[0],o=r[1],i=Pe().width,u=l.a.useState(0),d=Object(s.a)(u,2),h=d[0],b=d[1],f=l.a.useCallback((function(e){null!==e&&b(e.getBoundingClientRect().width)}),[i]);return Object(v.jsx)("div",{style:{width:"100%",height:"100%"},ref:f,children:Object(v.jsxs)(Fe.a,{height:300,width:h,padding:{top:50,left:80,right:50,bottom:50},domain:function(){if(e.data.speeds.length)return{x:[0,e.data.speeds.length*e.data.increment],y:[0,Math.max.apply(Math,Object(ae.a)(e.data.speeds))+.5]}}(),containerComponent:Object(v.jsx)(n,{zoomDimension:"x",responsive:!1,onZoomDomainChange:function(e){o(e.x)}}),children:[Object(v.jsx)(Ee.a,{dependentAxis:!0,label:"Messages",tickFormat:function(e){return e},axisLabelComponent:Object(v.jsx)(Le.a,{dy:-20})}),Object(v.jsx)(Ee.a,{label:"Time (s)"}),Object(v.jsx)(ze.a,{data:(t=je(e.data,e.flatten),t.speeds.map((function(e,n){return{time:n*t.increment,speed:e}}))).filter((function(e){return e.time>=c[0]&&e.time<=c[1]})),interpolation:"natural",x:"time",y:"speed"})]})})},Ue=Object(o.a)((function(e){return{slider:{paddingLeft:e.spacing(10),paddingRight:e.spacing(5),width:250,margin:0},header:{paddingBottom:0},chart:{marginTop:-40,paddingBottom:0},action:{margin:0,padding:0,marginBottom:e.spacing(1)}}})),Te=function(e){var t=e.vodInfo,n=e.elevation,a=Ue(),r=l.a.useState(1),c=Object(s.a)(r,2),o=c[0],i=c[1];return Object(v.jsxs)(xe.a,{elevation:n,children:[Object(v.jsx)(Oe.a,{title:Object(v.jsx)(N.a,{variant:"subtitle1",children:"Number of Chat Messages"}),subheader:Object(v.jsx)(N.a,{variant:"subtitle2",children:"Zoom in and drag to check out the graph"}),className:a.header}),Object(v.jsx)(Ne.a,{className:a.chart,children:Object(v.jsx)(Re,{data:fe(t.comments),flatten:o,vodID:t.vodID})}),Object(v.jsx)(ye.a,{className:a.action,children:Object(v.jsx)("div",{className:a.slider,children:Object(v.jsx)(_e.a,{value:o,marks:[{value:1,label:"Most detailed"},{value:10,label:"Least detailed"}],min:1,max:10,defaultValue:o,onChange:function(e,t){i(t)},"aria-labelledby":"flatten size"})})})]})},Me=n(257),Ae=function(e){var t=e.data,n=e.setHoveredData;return Object(v.jsx)("div",{children:Object(v.jsx)(Me.PieChart,{data:t,onMouseOver:function(e,a){n(t[a])},onMouseOut:function(){n(null)}})})},Ve=function(){var e=Object(y.a)(k.a.mark((function e(t){var n,a,r,c,o,i,s,u,l,d;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.a.get("/api/emotes/".concat(t.channelID));case 3:for(s in n=e.sent.data,a={},n.forEach((function(e){a[e.emoteName.toLowerCase()]={url:e.emoteImgURL,name:e.emoteName}})),r={},c=0,t.comments.map((function(e){return e.message.trim().toLowerCase()})).filter((function(e){return e.length>0})).forEach((function(e){for(var t=e.split(" "),n=new Set,o=0;o<t.length;o++){var i=e.trim();if(i in a&&!n.has(i)){n.add(a[i].name),i in r||(r[i]=0),r[i]++,c++;break}}})),o=[],i=["#2d080a","#c2f970","#7c3626","#a499b3","#f5853f","#89d2dc","#093824","#98a6d4","#ffcdbc","#6564db"],r)o.push({title:a[s].name,value:100*r[s]/c,color:"#E38627",url:a[s].url});for(o.sort((function(e,t){return e.value>=t.value?-1:0})),u=[],l=0,d=0;d<o.length;d++)o[d].value>=1?u.push(Object(j.a)(Object(j.a)({},o[d]),{},{color:i[d%i.length]})):l+=o[d].value;return l>0&&u.push({title:"Other",value:l,color:"#E38627",url:""}),e.abrupt("return",u);case 20:return e.prev=20,e.t0=e.catch(0),e.abrupt("return",[{title:"Error",value:100,color:"#E38627",url:""}]);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),Ge=Object(o.a)((function(e){return{slider:{paddingLeft:e.spacing(10),paddingRight:e.spacing(5),width:250,margin:0},header:{paddingBottom:0},action:{margin:0,padding:0,marginBottom:e.spacing(1)},pie:{justifyItems:"center",maxWidth:"45vw"},content:{display:"flex"},info:{alignSelf:"center",marginLeft:e.spacing(3)}}})),We=function(e){var t=e.vodInfo,n=e.elevation,a=l.a.useState(null),r=Object(s.a)(a,2),c=r[0],o=r[1],i=l.a.useState([]),u=Object(s.a)(i,2),d=u[0],h=u[1];l.a.useEffect((function(){Object(y.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h,e.next=3,Ve(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[t]);var b=Ge();return Object(v.jsxs)(xe.a,{elevation:n,children:[Object(v.jsx)(Oe.a,{title:Object(v.jsx)(N.a,{variant:"subtitle1",children:"Most Frequent Emotes"}),subheader:Object(v.jsx)(N.a,{variant:"subtitle2",children:"Hover over for info"}),className:b.header}),Object(v.jsxs)(Ne.a,{className:b.content,children:[Object(v.jsx)("div",{className:b.pie,children:Object(v.jsx)(Ae,{data:d,setHoveredData:o})}),Object(v.jsx)("div",{className:b.info,children:c&&Object(v.jsxs)("div",{children:[Object(v.jsxs)(N.a,{component:"h4",variant:"h6",children:[c.title," (",Math.round(c.value),"%)"]}),c.url&&Object(v.jsx)("img",{src:c.url,alt:"".concat(c.title)})]})})]}),Object(v.jsx)(ye.a,{className:b.action})]})},He=Object(o.a)((function(e){return{loadedText:{margin:e.spacing(5),fontFamily:"'Delta Gothic One', cursive"}}})),Ye=function(){var e=He(),t=Object(h.g)().vodID,n=l.a.useState(null),a=Object(s.a)(n,2),r=a[0],c=a[1],o=l.a.useState([]),u=Object(s.a)(o,2),d=u[0],b=u[1],f=l.a.useState(null),j=Object(s.a)(f,2),m=j[0],p=j[1],O=l.a.useState(!1),g=Object(s.a)(O,2),w=g[0],I=g[1],D=l.a.useState(-2),C=Object(s.a)(D,2),_=C[0],S=C[1],F=l.a.useState(!1),E=Object(s.a)(F,2),L=E[0],z=E[1],B=l.a.useState(""),P=Object(s.a)(B,2),R=P[0],U=P[1],T=l.a.useState(0),M=Object(s.a)(T,2),A=M[0],G=M[1],W=function(){var e=Object(y.a)(k.a.mark((function e(){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t,(function(e,t){S(t?-1:e)}));case 2:if(null!==(n=e.sent)){e.next=6;break}return I(!0),e.abrupt("return",[]);case 6:return b(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();l.a.useEffect((function(){Object(y.a)(k.a.mark((function e(){var n,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t);case 2:return n=e.sent,c(n),e.t0=G,e.next=7,V();case 7:if(e.t1=e.sent,(0,e.t0)(e.t1),!n){e.next=13;break}S(-1),e.next=21;break;case 13:return e.next=15,W();case 15:return a=e.sent,e.next=18,he(t);case 18:r=e.sent,p(r),c(Y(t,r,a));case 21:case"end":return e.stop()}}),e)})))()}),[t]);var Z=function(){var e=Object(y.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t);case 2:if(!e.sent){e.next=7;break}return z(!0),U("Already saved"),e.abrupt("return");case 7:if(G(A+1),m)try{$(t,m,d)}catch(n){z(!0),U("Failed to save vod")}case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(y.a)(k.a.mark((function e(){var t,n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r&&(t="VodID: ".concat(r.vodID,"\n").concat(r.comments.map((function(e){return"".concat(e.commenter,"[").concat(e.seconds,"s]: ").concat(e.message)})).join("\n")),n=document.createElement("a"),a=new Blob([t],{type:"text/plain;charset=utf-8"}),n.href=URL.createObjectURL(a),n.download="comments.txt",document.body.appendChild(n),n.click(),document.body.removeChild(n));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ee,{bookmarkNum:A}),Object(v.jsxs)(i.a,{maxWidth:"xl",children:[Object(v.jsx)("br",{}),w?Object(v.jsx)(pe,{}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ve.a,{container:!0,spacing:3,children:-1===_&&r&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ve.a,{item:!0,xs:5,md:5,xl:5,children:Object(v.jsx)(Ce,{vodInfo:r,elevation:5,downloadComments:q,saveVod:Z,loadComments:W})}),Object(v.jsx)(ve.a,{item:!0,xs:12,xl:6,children:Object(v.jsx)(Te,{elevation:5,vodInfo:r})}),Object(v.jsx)(ve.a,{item:!0,xs:12,xl:6,children:Object(v.jsx)(We,{elevation:5,vodInfo:r})})]})}),_>=0&&Object(v.jsxs)(N.a,{component:"h2",variant:"h4",align:"center",className:e.loadedText,children:["Loaded ",_," comments..."]})]}),Object(v.jsx)(x,{message:R,setOpen:z,open:L})]})]})},Ze=n(467),$e=n(462),qe=Object(o.a)({media:{height:0,paddingTop:"56.25%"}}),Je=function(){var e=l.a.useState(null),t=Object(s.a)(e,2),n=t[0],a=t[1],r=qe(),c=l.a.useState(0),o=Object(s.a)(c,2),u=o[0],b=o[1];l.a.useEffect((function(){Object(y.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:return t=e.sent,a(t),e.t0=b,e.next=7,J();case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)})))()}),[]);var f=function(e){var t=e.cardInner;return Object(v.jsx)(ve.a,{item:!0,xs:12,sm:12,md:6,lg:4,children:Object(v.jsx)(xe.a,{elevation:5,children:t})})},j=Object(h.f)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ee,{bookmarkNum:u}),Object(v.jsxs)(i.a,{maxWidth:"xl",children:[Object(v.jsx)("br",{}),n&&Object(v.jsx)(ve.a,{container:!0,spacing:3,children:n.map((function(e,t){return Object(v.jsx)(f,{cardInner:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Oe.a,{avatar:Object(v.jsx)(d.a,{onClick:function(){window.open(n[t].channelInfo.url)},children:Object(v.jsx)(ge.a,{"aria-label":"avatar image",src:n[t].channelInfo.logo})}),title:Object(v.jsx)(N.a,{variant:"subtitle1",children:n[t].vodInfo.title}),subheader:Object(v.jsxs)(N.a,{variant:"subtitle2",children:["By"," ",Object(v.jsx)(Q.a,{href:n[t].channelInfo.url,target:"_blank",rel:"noreferrer",children:n[t].channelName})," ","at"," ",new Date(n[t].vodInfo.recorded_at).toDateString()]})}),Object(v.jsx)(we.a,{onClick:function(){window.open(n[t].vodInfo.url)},children:Object(v.jsx)(ke.a,{image:n[t].vodInfo.preview.large,title:"Go to vod",className:r.media})}),Object(v.jsxs)(ye.a,{children:[Object(v.jsx)(Ie.a,{size:"small",color:"primary",onClick:function(){j.push("/search/".concat(e.vodID)),j.go(0)},children:"Analytics"}),Object(v.jsx)(Ie.a,{size:"small",color:"primary",onClick:(c=e.vodID,o=t,function(){n&&(a(n.filter((function(e,t){return t!==o}))),q(c),b(u-1))}),children:"Remove vod"})]})]})},e.vodID);var c,o}))})]})]})},Ke=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)($e.a,{}),Object(v.jsx)(Ze.b,{injectFirst:!0,children:Object(v.jsxs)(h.c,{children:[Object(v.jsx)(h.a,{path:"/search/:vodID",children:Object(v.jsx)(Ye,{})}),Object(v.jsx)(h.a,{path:"/bookmarks",children:Object(v.jsx)(Je,{})}),Object(v.jsx)(h.a,{path:"/",children:Object(v.jsx)(ne,{})})]})})]})},Qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,483)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},Xe=n(76),et=n(463),tt=n(258),nt=Object(tt.a)({palette:{primary:{main:"#7015c2"},secondary:{main:"#25e220"},background:{default:"azure",paper:"azure"}}});r.a.render(Object(v.jsx)(et.a,{theme:nt,children:Object(v.jsx)(Xe.a,{children:Object(v.jsx)(Ke,{})})}),document.getElementById("root")),Qe()}},[[412,1,2]]]);
//# sourceMappingURL=main.5a675f0c.chunk.js.map